%% file: maps-font-migration-plan.svg
%% title: Migration plan - Staged rollout
flowchart TB
  S0[0. Spec freeze + token map] --> S1[1. Build new font API]
  S1 --> S2[2. Create compatibility shims]
  S2 --> S3[3. Repo scan + call-site inventory]
  S3 --> S4[4. Batch migrations by feature area]
  S4 --> S5[5. Targeted tests + snapshot updates]
  S5 --> S6[6. Canary rollout + metrics]
  S6 --> S7[7. Full rollout + cleanup old APIs]
  S7 --> S8[8. Enforce: lint forbidden constructors]

  S2 -. rollback .-> R1[Rollback: feature flag / kill switch]
  S6 -. rollback .-> R1
