%% file: maps-font-before-apis.svg
%% title: Before - Five API families + direct/indirect imports
flowchart TB
  subgraph CONSUMERS[Consumption sites - hundreds total]
    F[Feature screens / controllers / SwiftUI views]
    C[Reusable UI components - cells, buttons, headers]
    S[Style builders - NSAttributedString, text styles]
  end

  subgraph APISETS[Five parallel typography API families]
    A[API A: Direct UIFont calls - systemFont / preferredFont]
    B[API B: Legacy helper - Font.style...]
    C1[API C: Design-system wrapper v1 - TerraTypography.*]
    D[API D: Feature-local extensions - UILabel+FeatureFonts]
    E[API E: Hard-coded fonts - font names/sizes]
  end

  F -. direct import .-> A
  F -. direct import .-> B
  F -. direct import .-> C1
  F -. direct import .-> D
  F -. direct import .-> E

  F -->|indirect via dependency| C
  F -->|indirect via dependency| S

  C --> A
  C --> B
  C --> C1
  C --> D
  C --> E

  S --> A
  S --> B
  S --> C1
  S --> D
  S --> E

  A --> P1[Scaling inconsistencies]
  B --> P2[Weight/size drift]
  C1 --> P3[Token/version skew]
  D --> P4[Local overrides]
  E --> P5[Hard-coded regressions]

  P1 --> R[Snapshot noise + UI drift]
  P2 --> R
  P3 --> R
  P4 --> R
  P5 --> R
